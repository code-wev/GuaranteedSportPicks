#!/usr/bin/env node
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function e(){};return{s:a,n:function t(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function e(t){throw t},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();return c=t.done,t},e:function e(t){s=!0,o=t},f:function e(){try{c||null==n.return||n.return()}finally{if(s)throw o}}}}function _regeneratorRuntime(){"use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime=function e(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(l){u=function e(t,n,r){return t[n]=r}}function d(t,n,r,o){var c,s,i,u,l=Object.create((n&&n.prototype instanceof g?n:g).prototype);return a(l,"_invoke",{value:(c=t,s=r,i=new S(o||[]),u=h,function(t,n){if(u===f)throw Error("Generator is already running");if(u===m){if("throw"===t)throw n;return{value:e,done:!0}}for(i.method=t,i.arg=n;;){var r=i.delegate;if(r){var a=P(r,i);if(a){if(a===y)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(u===h)throw u=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);u=f;var o=p(c,s,i);if("normal"===o.type){if(u=i.done?m:"suspendedYield",o.arg===y)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(u=m,i.method="throw",i.arg=o.arg)}})}),l}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=d;var h="suspendedStart",f="executing",m="completed",y={};function g(){}function v(){}function $(){}var w={};u(w,c,function(){return this});var b=Object.getPrototypeOf,x=b&&b(b(_([])));x&&x!==n&&r.call(x,c)&&(w=x);var R=$.prototype=g.prototype=Object.create(w);function I(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function T(e,t){var n;a(this,"_invoke",{value:function a(o,c){function s(){return new t(function(n,a){!function n(a,o,c,s){var i=p(e[a],e,o);if("throw"!==i.type){var u=i.arg,l=u.value;return l&&"object"==_typeof(l)&&r.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(l).then(function(e){u.value=e,c(u)},function(e){return n("throw",e,c,s)})}s(i.arg)}(o,c,n,a)})}return n=n?n.then(s,s):s()}})}function P(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}function q(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(q,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(_typeof(t)+" is not iterable")}return v.prototype=$,a(R,"constructor",{value:$,configurable:!0}),a($,"constructor",{value:v,configurable:!0}),v.displayName=u($,i,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,$):(e.__proto__=$,u(e,i,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},I(T.prototype),u(T.prototype,s,function(){return this}),t.AsyncIterator=T,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new T(d(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then(function(e){return e.done?e.value:c.next()})},I(R),u(R,i,"Generator"),u(R,c,function(){return this}),u(R,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,S.prototype={constructor:S,reset:function t(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!n)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function t(n){if(this.done)throw n;var a=this;function o(t,r){return i.type="throw",i.arg=n,a.next=t,r&&(a.method="next",a.arg=e),!!r}for(var c=this.tryEntries.length-1;c>=0;--c){var s=this.tryEntries[c],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function e(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var c=o;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=n&&n<=c.finallyLoc&&(c=null);var s=c?c.completion:{};return s.type=t,s.arg=n,c?(this.method="next",this.next=c.finallyLoc,y):this.complete(s)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),y},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var o=a.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function t(n,r,a){return this.delegate={iterator:_(n),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=e),y}},t}function asyncGeneratorStep(e,t,n,r,a,o,c){try{var s=e[o](c),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function c(e){asyncGeneratorStep(o,r,a,c,s,"next",e)}function s(e){asyncGeneratorStep(o,r,a,c,s,"throw",e)}c(void 0)})}}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}var _process$argv=_toArray(process.argv),command=_process$argv[2],args=_process$argv.slice(3),fs=require("fs"),path=require("path"),_require=require("commander"),program=_require.program,readline=require("readline"),RED="\x1b[31m",GREEN="\x1b[32m",BLUE="\x1b[34m",RESET="\x1b[0m",specialCharRegex=/[0-9!@#$%^&*()_+{}\[\]:;"'<>,.?/~`|\-=\s]/g;function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function toCamelCase(e){return e.replace(/[^a-zA-Z]+/g,"-").replace(/^-+|-+$/g,"").split("-").map(function(e,t){return 0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join("")}"resource"===command?(program.version("1.0.0").description("Generate route, model, controller, and interface files for a new resource").argument("<name>","Resource name").action(function(e){var t=specialCharRegex.test(args[0])?toCamelCase(args[0]):args[0].toLowerCase(),n=capitalize(t),r=path.join(__dirname,"..","src","modules",args[0]),a="\n// Import Router from express\nimport { Router } from 'express';\n\n// Import controller from corresponding module\nimport { \n  create".concat(n,",\n  createMany").concat(n,",\n  update").concat(n,",\n  updateMany").concat(n,",\n  delete").concat(n,",\n  deleteMany").concat(n,",\n  get").concat(n,"ById,\n  getMany").concat(n,"\n} from './").concat(args[0],".controller';\n\n//Import validation from corresponding module\nimport { validateCreate").concat(n,", validateCreateMany").concat(n,", validateUpdate").concat(n,", validateUpdateMany").concat(n,"} from './").concat(args[0],".validation';\nimport { validateId, validateIds, validateSearchQueries } from '../../handlers/common-zod-validator';\n\n// Initialize router\nconst router = Router();\n\n// Define route handlers\n/**\n * @route POST /api/v1/").concat(args[0],"/create-").concat(args[0],"\n * @description Create a new ").concat(args[0],"\n * @access Public\n * @param {function} controller - ['create").concat(n,"']\n * @param {function} validation - ['validateCreate").concat(n,"']\n */\nrouter.post(\"/create-").concat(args[0],'", validateCreate').concat(n,", create").concat(n,");\n\n/**\n * @route POST /api/v1/").concat(args[0],"/create-").concat(args[0],"/many\n * @description Create multiple ").concat(args[0],"s\n * @access Public\n * @param {function} controller - ['createMany").concat(n,"']\n * @param {function} validation - ['validateCreateMany").concat(n,"']\n */\nrouter.post(\"/create-").concat(args[0],'/many", validateCreateMany').concat(n,", createMany").concat(n,");\n\n/**\n * @route PUT /api/v1/").concat(args[0],"/update-").concat(args[0],"/many\n * @description Update multiple ").concat(args[0],"s information\n * @access Public\n * @param {function} controller - ['updateMany").concat(n,"']\n * @param {function} validation - ['validateIds', 'validateUpdateMany").concat(n,"']\n */\nrouter.put(\"/update-").concat(args[0],'/many", validateIds, validateUpdateMany').concat(n,", updateMany").concat(n,");\n\n/**\n * @route PUT /api/v1/").concat(args[0],"/update-").concat(args[0],"/:id\n * @description Update ").concat(args[0]," information\n * @param {string} id - The ID of the ").concat(args[0]," to update\n * @access Public\n * @param {function} controller - ['update").concat(n,"']\n * @param {function} validation - ['validateId', 'validateUpdate").concat(n,"']\n */\nrouter.put(\"/update-").concat(args[0],'/:id", validateId, validateUpdate').concat(n,", update").concat(n,");\n\n/**\n * @route DELETE /api/v1/").concat(args[0],"/delete-").concat(args[0],"/many\n * @description Delete multiple ").concat(args[0],"s\n * @access Public\n * @param {function} controller - ['deleteMany").concat(n,"']\n * @param {function} validation - ['validateIds']\n */\nrouter.delete(\"/delete-").concat(args[0],'/many", validateIds, deleteMany').concat(n,");\n\n/**\n * @route DELETE /api/v1/").concat(args[0],"/delete-").concat(args[0],"/:id\n * @description Delete a ").concat(args[0],"\n * @param {string} id - The ID of the ").concat(args[0]," to delete\n * @access Public\n * @param {function} controller - ['delete").concat(n,"']\n * @param {function} validation - ['validateId']\n */\nrouter.delete(\"/delete-").concat(args[0],'/:id", validateId, delete').concat(n,");\n\n/**\n * @route GET /api/v1/").concat(args[0],"/get-").concat(args[0],"/many\n * @description Get multiple ").concat(args[0],"s\n * @access Public\n * @param {function} controller - ['getMany").concat(n,"']\n * @param {function} validation - ['validateSearchQueries']\n */\nrouter.get(\"/get-").concat(args[0],'/many", validateSearchQueries, getMany').concat(n,");\n\n/**\n * @route GET /api/v1/").concat(args[0],"/get-").concat(args[0],"/:id\n * @description Get a ").concat(args[0]," by ID\n * @param {string} id - The ID of the ").concat(args[0]," to retrieve\n * @access Public\n * @param {function} controller - ['get").concat(n,"ById']\n * @param {function} validation - ['validateId']\n */\nrouter.get(\"/get-").concat(args[0],'/:id", validateId, get').concat(n,"ById);\n\n// Export the router\nmodule.exports = router;\n    ");path.join(r,"".concat(args[0],".route.ts"));var o=path.join(__dirname,"..","src","modules",args[0]),c="\nimport { Request, Response } from 'express';\nimport { ".concat(t,"Services } from './").concat(args[0],".service';\nimport ServerResponse from '../../helpers/responses/custom-response';\nimport catchAsync from '../../utils/catch-async/catch-async';\n\n/**\n * Controller function to handle the creation of a single ").concat(n,".\n *\n * @param {Request} req - The request object containing ").concat(args[0]," data in the body.\n * @param {Response} res - The response object used to send the response.\n * @returns {Promise<Partial<I").concat(n,">>} - The created ").concat(t,".\n * @throws {Error} - Throws an error if the ").concat(t," creation fails.\n */\nexport const create").concat(n," = catchAsync(async (req: Request, res: Response) => {\n  // Call the service method to create a new ").concat(args[0]," and get the result\n  const result = await ").concat(t,"Services.create").concat(n,"(req.body);\n  if (!result) throw new Error('Failed to create ").concat(t,"');\n  // Send a success response with the created ").concat(t," data\n  ServerResponse(res, true, 201, '").concat(n," created successfully', result);\n});\n\n/**\n * Controller function to handle the creation of multiple ").concat(args[0],"s.\n *\n * @param {Request} req - The request object containing an array of ").concat(args[0]," data in the body.\n * @param {Response} res - The response object used to send the response.\n * @returns {Promise<Partial<I").concat(n,">[]>} - The created ").concat(t,"s.\n * @throws {Error} - Throws an error if the ").concat(t,"s creation fails.\n */\nexport const createMany").concat(n," = catchAsync(async (req: Request, res: Response) => {\n  // Call the service method to create multiple ").concat(t,"s and get the result\n  const result = await ").concat(t,"Services.createMany").concat(n,"(req.body);\n  if (!result) throw new Error('Failed to create multiple ").concat(t,"s');\n  // Send a success response with the created ").concat(args[0],"s data\n  ServerResponse(res, true, 201, '").concat(n,"s created successfully', result);\n});\n\n/**\n * Controller function to handle the update operation for a single ").concat(args[0],".\n *\n * @param {Request} req - The request object containing the ID of the ").concat(args[0]," to update in URL parameters and the updated data in the body.\n * @param {Response} res - The response object used to send the response.\n * @returns {Promise<Partial<I").concat(n,">>} - The updated ").concat(t,".\n * @throws {Error} - Throws an error if the ").concat(t," update fails.\n */\nexport const update").concat(n," = catchAsync(async (req: Request, res: Response) => {\n  const { id } = req.params;\n  // Call the service method to update the ").concat(args[0]," by ID and get the result\n  const result = await ").concat(t,"Services.update").concat(n,"(id, req.body);\n  if (!result) throw new Error('Failed to update ").concat(t,"');\n  // Send a success response with the updated ").concat(args[0]," data\n  ServerResponse(res, true, 200, '").concat(n," updated successfully', result);\n});\n\n/**\n * Controller function to handle the update operation for multiple ").concat(args[0],"s.\n *\n * @param {Request} req - The request object containing an array of ").concat(args[0]," data in the body.\n * @param {Response} res - The response object used to send the response.\n * @returns {Promise<Partial<I").concat(n,">[]>} - The updated ").concat(t,"s.\n * @throws {Error} - Throws an error if the ").concat(t,"s update fails.\n */\nexport const updateMany").concat(n," = catchAsync(async (req: Request, res: Response) => {\n  // Call the service method to update multiple ").concat(args[0],"s and get the result\n  const result = await ").concat(t,"Services.updateMany").concat(n,"(req.body);\n  if (!result.length) throw new Error('Failed to update multiple ").concat(t,"s');\n  // Send a success response with the updated ").concat(args[0],"s data\n  ServerResponse(res, true, 200, '").concat(n,"s updated successfully', result);\n});\n\n/**\n * Controller function to handle the deletion of a single ").concat(args[0],".\n *\n * @param {Request} req - The request object containing the ID of the ").concat(args[0]," to delete in URL parameters.\n * @param {Response} res - The response object used to send the response.\n * @returns {Promise<Partial<I").concat(n,">>} - The deleted ").concat(t,".\n * @throws {Error} - Throws an error if the ").concat(t," deletion fails.\n */\nexport const delete").concat(n," = catchAsync(async (req: Request, res: Response) => {\n  const { id } = req.params;\n  // Call the service method to delete the ").concat(args[0]," by ID\n  const result = await ").concat(t,"Services.delete").concat(n,"(id);\n  if (!result) throw new Error('Failed to delete ").concat(t,"');\n  // Send a success response confirming the deletion\n  ServerResponse(res, true, 200, '").concat(n," deleted successfully');\n});\n\n/**\n * Controller function to handle the deletion of multiple ").concat(args[0],"s.\n *\n * @param {Request} req - The request object containing an array of IDs of ").concat(args[0]," to delete in the body.\n * @param {Response} res - The response object used to send the response.\n * @returns {Promise<Partial<I").concat(n,">[]>} - The deleted ").concat(t,"s.\n * @throws {Error} - Throws an error if the ").concat(t," deletion fails.\n */\nexport const deleteMany").concat(n," = catchAsync(async (req: Request, res: Response) => {\n  // Call the service method to delete multiple ").concat(args[0],"s and get the result\n  const result = await ").concat(t,"Services.deleteMany").concat(n,"(req.body);\n  if (!result) throw new Error('Failed to delete multiple ").concat(t,"s');\n  // Send a success response confirming the deletions\n  ServerResponse(res, true, 200, '").concat(n,"s deleted successfully');\n});\n\n/**\n * Controller function to handle the retrieval of a single ").concat(args[0]," by ID.\n *\n * @param {Request} req - The request object containing the ID of the ").concat(args[0]," to retrieve in URL parameters.\n * @param {Response} res - The response object used to send the response.\n * @returns {Promise<Partial<I").concat(n,">>} - The retrieved ").concat(t,".\n * @throws {Error} - Throws an error if the ").concat(t," retrieval fails.\n */\nexport const get").concat(n,"ById = catchAsync(async (req: Request, res: Response) => {\n  const { id } = req.params;\n  // Call the service method to get the ").concat(args[0]," by ID and get the result\n  const result = await ").concat(t,"Services.get").concat(n,"ById(id);\n  if (!result) throw new Error('").concat(n," not found');\n  // Send a success response with the retrieved resource data\n  ServerResponse(res, true, 200, '").concat(n," retrieved successfully', result);\n});\n\n/**\n * Controller function to handle the retrieval of multiple ").concat(args[0],"s.\n *\n * @param {Request} req - The request object containing query parameters for filtering.\n * @param {Response} res - The response object used to send the response.\n * @returns {Promise<Partial<I").concat(n,">[]>} - The retrieved ").concat(t,"s.\n * @throws {Error} - Throws an error if the ").concat(t,"s retrieval fails.\n */\nexport const getMany").concat(n," = catchAsync(async (req: Request, res: Response) => {\n  // Type assertion for query parameters \n  const query = req.query as unknown as { searchKey?: string, showPerPage: number, pageNo: number };\n  // Call the service method to get multiple ").concat(args[0],"s based on query parameters and get the result\n  const { ").concat(t,"s, totalData, totalPages } = await ").concat(t,"Services.getMany").concat(n,"(query);\n  if (!").concat(t,"s) throw new Error('Failed to retrieve ").concat(t,"s');\n  // Send a success response with the retrieved ").concat(args[0],"s data\n  ServerResponse(res, true, 200, '").concat(n,"s retrieved successfully', { ").concat(t,"s, totalData, totalPages });\n});\n    ");path.join(o,"".concat(args[0],".controller.ts"));var s=path.join(__dirname,"..","src","modules",args[0]),i="\n/**\n * Type definition for ".concat(n,".\n *\n * This type defines the structure of a single ").concat(t," object.\n * @interface T").concat(n,"\n */\nexport interface T").concat(n," {\n  // Add fields as needed\n}\n    ");path.join(s,"".concat(args[0],".interface.ts"));var u=path.join(__dirname,"..","src","modules",args[0]),l="\nimport mongoose, { Document, Schema } from 'mongoose';\n\n// Define and export an interface representing a ".concat(n," document\nexport interface I").concat(n," extends Document {\n  // Define the schema fields with their types\n  // Example fields (replace with actual fields)\n  // fieldName: fieldType;\n}\n\n// Define the ").concat(n," schema\nconst ").concat(n,"Schema: Schema<I").concat(n,"> = new Schema({\n  // Define schema fields here\n  // Example fields (replace with actual schema)\n  // fieldName: {\n  //   type: Schema.Types.FieldType,\n  //   required: true,\n  //   trim: true,\n  // },\n},{\n timestamps: true,\n versionKey: false,\n});\n\n// Create the ").concat(n," model\nconst ").concat(n," = mongoose.model<I").concat(n,">('").concat(n,"', ").concat(n,"Schema);\n\n// Export the ").concat(n," model\nexport default ").concat(n,";\n    ");path.join(u,"".concat(args[0],".model.ts"));var d=path.join(__dirname,"..","src","modules",args[0]),p="\nimport { NextFunction, Request, Response } from 'express';\nimport { z } from 'zod';\nimport zodErrorHandler from '../../handlers/zod-error-handler';\n\n/**\n * Zod schema for validating ".concat(t," data during creation.\n */\nconst zodCreate").concat(n,"Schema = z.object({\n  // Define fields required for creating a new ").concat(t,".\n  // Example:\n  // filedName: z.string({ message: 'Please provide a filedName.' }).min(1, \"Can't be empty.\"),\n}).strict();\n\n/**\n * Middleware function to validate ").concat(t," creation data using Zod schema.\n * @param {Request} req - The request object.\n * @param {Response} res - The response object.\n * @param {NextFunction} next - The next middleware function.\n * @returns {void}\n */\nexport const validateCreate").concat(n," = (req: Request, res: Response, next: NextFunction) => {\n  // Validate the request body for creating a new ").concat(t,"\n  const parseResult = zodCreate").concat(n,"Schema.safeParse(req.body);\n\n  // If validation fails, send an error response using the Zod error handler\n  if (!parseResult.success) {\n    return zodErrorHandler(req, res, parseResult.error);\n  }\n\n  // If validation passes, proceed to the next middleware function\n  return next();\n};\n\n/**\n * Zod schema for validating multiple ").concat(t," data during creation.\n */\nconst zodCreateMany").concat(n,"Schema = z.array(zodCreate").concat(n,"Schema);\n\n/**\n * Middleware function to validate multiple ").concat(t," creation data using Zod schema.\n * @param {Request} req - The request object.\n * @param {Response} res - The response object.\n * @param {NextFunction} next - The next middleware function.\n * @returns {void}\n */\nexport const validateCreateMany").concat(n," = (req: Request, res: Response, next: NextFunction) => {\n  const parseResult = zodCreateMany").concat(n,"Schema.safeParse(req.body);\n  if (!parseResult.success) {\n    return zodErrorHandler(req, res, parseResult.error);\n  }\n  return next();\n};\n\n/**\n * Zod schema for validating ").concat(t," data during updates.\n */\nconst zodUpdate").concat(n,"Schema = z.object({\n  // Define fields required for updating an existing ").concat(t,".\n  // Example:\n  // fieldName: z.string({ message: 'Please provide a filedName.' }).optional(), // Fields can be optional during updates\n}).strict();\n\n/**\n * Middleware function to validate ").concat(t," update data using Zod schema.\n * @param {Request} req - The request object.\n * @param {Response} res - The response object.\n * @param {NextFunction} next - The next middleware function.\n * @returns {void}\n */\nexport const validateUpdate").concat(n," = (req: Request, res: Response, next: NextFunction) => {\n  // Validate the request body for updating an existing ").concat(t,"\n  const parseResult = zodUpdate").concat(n,"Schema.safeParse(req.body);\n\n  // If validation fails, send an error response using the Zod error handler\n  if (!parseResult.success) {\n    return zodErrorHandler(req, res, parseResult.error);\n  }\n\n  // If validation passes, proceed to the next middleware function\n  return next();\n};\n\n/**\n * Zod schema for validating multiple ").concat(t," data during updates.\n */\nconst zodUpdateMany").concat(n,"Schema = z.array(zodUpdate").concat(n,"Schema);\n\n\n/**\n * Middleware function to validate multiple ").concat(t," update data using Zod schema.\n * @param {Request} req - The request object.\n * @param {Response} res - The response object.\n * @param {NextFunction} next - The next middleware function.\n * @returns {void}\n */\nexport const validateUpdateMany").concat(n," = (req: Request, res: Response, next: NextFunction) => {\n  const parseResult = zodUpdateMany").concat(n,"Schema.safeParse(req.body);\n  if (!parseResult.success) {\n    return zodErrorHandler(req, res, parseResult.error);\n  }\n  return next();\n};\n    ");path.join(d,"".concat(args[0],".validation.ts"));var h=path.join(__dirname,"..","src","modules",args[0]),f="\n// Import the model\nimport ".concat(n,"Model, { I").concat(n," } from './").concat(args[0],".model';\n\n/**\n * Service function to create a new ").concat(t,".\n *\n * @param {Partial<I").concat(n,">} data - The data to create a new ").concat(t,".\n * @returns {Promise<Partial<I").concat(n,">>} - The created ").concat(t,".\n */\nconst create").concat(n," = async (data: Partial<I").concat(n,">): Promise<Partial<I").concat(n,">> => {\n  const new").concat(n," = new ").concat(n,"Model(data);\n  const saved").concat(n," = await new").concat(n,".save();\n  return saved").concat(n,";\n};\n\n/**\n * Service function to create multiple ").concat(t,".\n *\n * @param {Partial<I").concat(n,">[]} data - An array of data to create multiple ").concat(t,".\n * @returns {Promise<Partial<I").concat(n,">[]>} - The created ").concat(t,".\n */\nconst createMany").concat(n," = async (data: Partial<I").concat(n,">[]): Promise<Partial<I").concat(n,">[]> => {\n  const created").concat(n," = await ").concat(n,"Model.insertMany(data);\n  return created").concat(n,";\n};\n\n/**\n * Service function to update a single ").concat(t," by ID.\n *\n * @param {string} id - The ID of the ").concat(t," to update.\n * @param {Partial<I").concat(n,">} data - The updated data for the ").concat(t,".\n * @returns {Promise<Partial<I").concat(n,">>} - The updated ").concat(t,".\n */\nconst update").concat(n," = async (id: string, data: Partial<I").concat(n,">): Promise<Partial<I").concat(n," | null>> => {\n  const updated").concat(n," = await ").concat(n,"Model.findByIdAndUpdate(id, data, { new: true });\n  return updated").concat(n,";\n};\n\n/**\n * Service function to update multiple ").concat(t,".\n *\n * @param {Array<{ id: string, updates: Partial<I").concat(n,"> }>} data - An array of data to update multiple ").concat(t,".\n * @returns {Promise<Partial<I").concat(n,">[]>} - The updated ").concat(t,".\n */\nconst updateMany").concat(n," = async (data: Array<{ id: string, updates: Partial<I").concat(n,"> }>): Promise<Partial<I").concat(n,">[]> => {\n  const updatePromises = data.map(({ id, updates }) =>\n    ").concat(n,"Model.findByIdAndUpdate(id, updates, { new: true })\n  );\n  const updated").concat(n," = await Promise.all(updatePromises);\n  // Filter out null values\n  const validUpdated").concat(n," = updated").concat(n,".filter(item => item !== null) as I").concat(n,"[];\n  return validUpdated").concat(n,";\n};\n\n/**\n * Service function to delete a single ").concat(t," by ID.\n *\n * @param {string} id - The ID of the ").concat(t," to delete.\n * @returns {Promise<Partial<I").concat(n,">>} - The deleted ").concat(t,".\n */\nconst delete").concat(n," = async (id: string): Promise<Partial<I").concat(n," | null>> => {\n  const deleted").concat(n," = await ").concat(n,"Model.findByIdAndDelete(id);\n  return deleted").concat(n,";\n};\n\n/**\n * Service function to delete multiple ").concat(t,".\n *\n * @param {string[]} ids - An array of IDs of ").concat(t," to delete.\n * @returns {Promise<Partial<I").concat(n,">[]>} - The deleted ").concat(t,".\n */\nconst deleteMany").concat(n," = async (ids: string[]): Promise<Partial<I").concat(n,">[]> => {\n  const ").concat(t,"ToDelete = await ").concat(n,"Model.find({ _id: { $in: ids } });\n  if (!").concat(t,"ToDelete.length) throw new Error('No ").concat(t," found to delete');\n  await ").concat(n,"Model.deleteMany({ _id: { $in: ids } });\n  return ").concat(t,"ToDelete; \n};\n\n/**\n * Service function to retrieve a single ").concat(t," by ID.\n *\n * @param {string} id - The ID of the ").concat(t," to retrieve.\n * @returns {Promise<Partial<I").concat(n,">>} - The retrieved ").concat(t,".\n */\nconst get").concat(n,"ById = async (id: string): Promise<Partial<I").concat(n," | null>> => {\n  const ").concat(t," = await ").concat(n,"Model.findById(id);\n  return ").concat(t,";\n};\n\n/**\n * Service function to retrieve multiple ").concat(t," based on query parameters.\n *\n * @param {object} query - The query parameters for filtering ").concat(t,".\n * @returns {Promise<Partial<I").concat(n,">[]>} - The retrieved ").concat(t,"\n */\nconst getMany").concat(n," = async (query: {\n  searchKey?: string;\n  showPerPage: number;\n  pageNo: number;\n}): Promise<{ ").concat(t,"s: Partial<I").concat(n,">[]; totalData: number; totalPages: number }> => {\n  const { searchKey = '', showPerPage, pageNo } = query;\n\n  // Build the search filter based on the search key\n  const searchFilter = {\n    $or: [\n      { fieldName: { $regex: searchKey, $options: 'i' } },\n      { fieldName: { $regex: searchKey, $options: 'i' } },\n      // Add more fields as needed\n    ],\n  };\n\n  // Calculate the number of items to skip based on the page number\n  const skipItems = (pageNo - 1) * showPerPage;\n\n  // Find the total count of matching ").concat(t,"\n  const totalData = await ").concat(n,"Model.countDocuments(searchFilter);\n\n  // Calculate the total number of pages\n  const totalPages = Math.ceil(totalData / showPerPage);\n\n  // Find ").concat(t," based on the search filter with pagination\n  const ").concat(t,"s = await ").concat(n,"Model.find(searchFilter)\n    .skip(skipItems)\n    .limit(showPerPage)\n    .select(''); // Keep/Exclude any field if needed\n\n  return { ").concat(t,"s, totalData, totalPages };\n};\n\nexport const ").concat(t,"Services = {\n  create").concat(n,",\n  createMany").concat(n,",\n  update").concat(n,",\n  updateMany").concat(n,",\n  delete").concat(n,",\n  deleteMany").concat(n,",\n  get").concat(n,"ById,\n  getMany").concat(n,",\n};\n    ");function m(e){return["".concat(e,".controller.ts"),"".concat(e,".interface.ts"),"".concat(e,".model.ts"),"".concat(e,".route.ts"),"".concat(e,".service.ts"),"".concat(e,".validation.ts")]}function y(e,t){return new Promise(function(n){e.question(t,n)})}function g(e,t){return v.apply(this,arguments)}function v(){return(v=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,n){var r,a,o,c,s,i,u;return _regeneratorRuntime().wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:r=fs.readdirSync(t),a=capitalize(n),o=readline.createInterface({input:process.stdin,output:process.stdout}),l.prev=3,c=_createForOfIteratorHelper(r),l.prev=5,i=_regeneratorRuntime().mark(function e(){var r,c,i,u,l,d,p,h,f,g,v;return _regeneratorRuntime().wrap(function e(w){for(;;)switch(w.prev=w.next){case 0:if(r=s.value,c=path.join(t,r),r!==n||!(i=fs.statSync(c)).isDirectory()){w.next=53;break}if(u=fs.readdirSync(c),0!==(d=(l=m(n)).filter(function(e){return!u.includes(e)})).length){w.next=12;break}console.log("".concat(RED).concat(a," module already exists.").concat(RESET)),w.next=52;break;case 12:if(!(d.length>0&&d.length<l.length)){w.next=50;break}return console.log("".concat(GREEN).concat(a," ").concat(RESET,"module exists, but some files are missing:")),d.forEach(function(e,t){return console.log("".concat(GREEN).concat(t+1,". ").concat(e).concat(RESET))}),w.next=17,y(o,"".concat(BLUE,"Do you want to create missing files one by one (Yes/Y) or all at once (Create/C)?").concat(RESET," Enter (Yes/Y) or (Create/C): "));case 17:if(!("yes"===(p=w.sent).toLowerCase()||"y"===p.toLowerCase())){w.next=42;break}h=_createForOfIteratorHelper(d),w.prev=20,h.s();case 22:if((f=h.n()).done){w.next=32;break}return g=f.value,w.next=26,y(o,"".concat(BLUE,"Do you want to create ").concat(GREEN).concat(g,"?").concat(RESET," (yes/no) "));case 26:if(!("yes"===(v=w.sent).toLowerCase()||"y"===v.toLowerCase())){w.next=30;break}return w.next=30,$(c,g,n);case 30:w.next=22;break;case 32:w.next=37;break;case 34:w.prev=34,w.t0=w.catch(20),h.e(w.t0);case 37:return w.prev=37,h.f(),w.finish(37);case 40:case 45:w.next=48;break;case 42:if(!("create"===p.toLowerCase()||"c"===p.toLowerCase())){w.next=47;break}return w.next=45,b(c,d,n);case 47:console.log("".concat(RED,"Invalid option. No files will be created.").concat(RESET));case 48:w.next=52;break;case 50:return w.next=52,b(c,d,n);case 52:return w.abrupt("return",{v:!0});case 53:case"end":return w.stop()}},e,null,[[20,34,37,40]])}),c.s();case 8:if((s=c.n()).done){l.next=15;break}return l.delegateYield(i(),"t0",10);case 10:if(!(u=l.t0)){l.next=13;break}return l.abrupt("return",u.v);case 13:l.next=8;break;case 15:l.next=20;break;case 17:l.prev=17,l.t1=l.catch(5),c.e(l.t1);case 20:return l.prev=20,c.f(),l.finish(20);case 23:return l.abrupt("return",!1);case 24:return l.prev=24,o.close(),l.finish(24);case 27:case"end":return l.stop()}},e,null,[[3,,24,27],[5,17,20,23]])}))).apply(this,arguments)}function $(e,t,n){return w.apply(this,arguments)}function w(){return(w=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,n,r){var o,s;return _regeneratorRuntime().wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:o=path.join(t,n),u.t0=n,u.next=u.t0==="".concat(r,".route.ts")?4:u.t0==="".concat(r,".controller.ts")?6:u.t0==="".concat(r,".model.ts")?8:u.t0==="".concat(r,".interface.ts")?10:u.t0==="".concat(r,".validation.ts")?12:u.t0==="".concat(r,".service.ts")?14:16;break;case 4:return s=a,u.abrupt("break",16);case 6:return s=c,u.abrupt("break",16);case 8:return s=l,u.abrupt("break",16);case 10:return s=i,u.abrupt("break",16);case 12:return s=p,u.abrupt("break",16);case 14:return s=f,u.abrupt("break",16);case 16:var d;fs.writeFileSync(o,s.trim()),console.log("".concat(GREEN,"CREATE ").concat(RESET).concat((d=o,path.relative(path.join(__dirname,".."),d))," ").concat(BLUE,"(").concat(Buffer.byteLength(s,"utf8")," bytes)").concat(RESET));case 18:case"end":return u.stop()}},e)}))).apply(this,arguments)}function b(e,t,n){return x.apply(this,arguments)}function x(){return(x=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,n,r){var a,o,c;return _regeneratorRuntime().wrap(function e(s){for(;;)switch(s.prev=s.next){case 0:a=_createForOfIteratorHelper(n),s.prev=1,a.s();case 3:if((o=a.n()).done){s.next=9;break}return c=o.value,s.next=7,$(t,c,r);case 7:s.next=3;break;case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),a.e(s.t0);case 14:return s.prev=14,a.f(),s.finish(14);case 17:case"end":return s.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}path.join(h,"".concat(args[0],".service.ts")),[r,o,u,s].forEach(function(e){fs.existsSync(e)||fs.mkdirSync(e,{recursive:!0})}),_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t,n,r;return _regeneratorRuntime().wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:if(t=args[0],n=path.join(process.cwd(),"src","modules"),t){a.next=5;break}return console.log("".concat(RED,"Please provide a module name.").concat(RESET)),a.abrupt("return");case 5:return a.next=7,g(n,t);case 7:(r=a.sent)||console.log("".concat(RED,"Module ").concat(t," not found.").concat(RESET));case 9:case"end":return a.stop()}},e)}))()}),program.parse(['node','cli.js'].concat(args))):(console.error("Unknown command: ".concat(command)),process.exit(1));